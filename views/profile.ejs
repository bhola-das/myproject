<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Document</title>
</head>
<body>
   <div class=" w-full h-screen  pt-10 pl-10">
    <div class="flex w-full justify-between ">
        <a class="px-2 py-2 bg-blue-500 text-white hover:text-red-500 t rounded-lg mr-3" href="/">Home</a>
        <a class="px-2 py-2 bg-red-500 t rounded-lg mr-3" href="/logout">Logout</a>
    </div>
    <h1 class=" font bold text-2xl mb-3">Hello <%= user.name%> ðŸ™Œ</h1>
    <h1 class=" mb-4"> You Can Create your new Note</h1>
    <form action="/post" method="post">
        <textarea class="rounded p-2 md:w-1/2  bg-gray-200 border outline-none block mb-3" placeholder="write your notes here.." name="content" id=""></textarea>
        <button class="px-3 py-2 bg-blue-700 rounded-lg text-white">Create new Note</button>
    </form>

    <div class="posts mt-10">
        <h1 class="text-green-400 font-bold text-2xl mb-2 ">Your posts</h1>
        <% user.posts.reverse().forEach(function(post){%>
            <div class="post md:w-1/2 p-4  rounded bg-gray-500 pl-3 mr-3 mb-3">
                <h1 class="text-blue-900 text-2xl mb-2 "><%= user.username%></h1>
                <p class=" p-2 text-white "><%= post.content%></p>
                <h1 class="text-red-500"><%= post.likes.length%> likes</h1>
                <div class="flex gap-3 mt-1 ">
                  <a class="text-blue-500 px-3 py-2 bg-white rounded-lg hover:bg-green-500" href="/like/<%=post._id%>">
                    <%= post.likes.indexOf(user._id)=== -1 ? "Like" : "Unlike" %>
                 </a>
                <a  class="px-3 py-2 bg-yellow-300 rounded-lg hover:bg-red-500" href="/edit/<%=post._id%>">Edit</a>
                <form action="/delete/<%= post._id %>" method="POST" onsubmit="return confirm('Are you sure you want to delete this post?');">
                    <button type="submit" class="px-3 py-2 bg-red-500 rounded-lg text-white hover:bg-red-700">Delete</button>
                </form>
               </div>
               </div>

       <% })%>
    </div>
    
   </div>
 
</body>
</html>